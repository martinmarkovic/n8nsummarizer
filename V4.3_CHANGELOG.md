# Version 4.3 Changelog

**Release Date:** December 23, 2025  
**Branch:** `v4.3`  
**Comparison:** v4.2 ‚Üí v4.3

## New Features üéÜ

### 1. Smart Output Folder Naming for Bulk Summarizer
- **Feature:** Output folders now use source folder name + "- Summarized" instead of generic "Summaries"
- **Benefit:** Much clearer which output corresponds to which input
- **Example:** `/data/Reports/` ‚Üí `/data/Reports - Summarized/`
- **File:** `controllers/bulk_summarizer_controller.py`
- **Method:** `_create_output_folder()` (updated)

### 2. Font Size Preference Persistence
- **Feature:** Font size adjustments now saved to .env and remembered on app restart
- **Benefit:** Users don't need to adjust font size every time they launch the app
- **Scope:** All text widgets (File Summarizer, YouTube Summarizer, Transcriber, Bulk Summarizer)
- **Storage:** `.env` file with `APP_FONT_SIZE` key
- **File:** `views/main_window.py`
- **Methods:** New `_load_font_size_from_env()` and `_save_font_size_to_env()`

## Bug Fixes üêü

- Output folder naming is now contextual and user-friendly
- Font size preference is no longer lost on app restart

## Changes by File

### `controllers/bulk_summarizer_controller.py`

**Method: `_create_output_folder(source_folder, output_location)`**

```diff
- # Old behavior: always creates "Summaries" subfolder
- output_path = output_path / "Summaries"

+ # New behavior: uses source folder name + " vedl- Summarized"
+ source_folder_name = source_path.name
+ if str(output_path) == str(source_path.parent):
+     output_path = output_path / f"{source_folder_name} - Summarized"
```

**Impact:**
- Backward compatible with custom output locations
- No changes to file reading or N8N integration
- Cleaner output folder hierarchy

---

### `views/main_window.py`

**New Methods:**

```python
def _load_font_size_from_env(self) -> int
    """Load font size from .env file on startup"""

def _save_font_size_to_env(self, font_size: int) -> bool
    """Save font size to .env file after each adjustment"""
```

**Modified Methods:**

```python
def __init__(self, root)
    # CHANGE: Load font size from .env instead of using constant
    self.current_font_size = self._load_font_size_from_env()

def _increase_font_size(self)
    # ADDITION: Save to .env after increasing
    self._save_font_size_to_env(self.current_font_size)

def _decrease_font_size(self)
    # ADDITION: Save to .env after decreasing
    self._save_font_size_to_env(self.current_font_size)
```

**Impact:**
- Startup time: Negligible (single .env read)
- Memory: Minimal (single integer stored)
- UI/UX: Significant improvement (preferences persisted)

---

## Configuration Changes

### New .env Variable

**Key:** `APP_FONT_SIZE`  
**Type:** Integer  
**Valid Values:** [8, 10, 12, 14, 16, 18, 20]  
**Default:** 10  
**Scope:** Global font size for all text widgets  

**Example .env:**
```env
# Application Font Size (in pixels)
APP_FONT_SIZE=14

# N8N Configuration
N8N_WEBHOOK_URL=http://localhost:5678/webhook-test/hook1
N8N_TIMEOUT=30
```

**Behavior:**
- If not set: Defaults to 10px on first run
- If invalid: Defaults to 10px and logs warning
- If valid: Used on startup
- On every adjustment: Automatically updated

---

## Version Details

| Aspect | Details |
|--------|----------|
| **Version** | 4.3 |
| **Release Date** | December 23, 2025 |
| **Branch** | v4.3 |
| **Based On** | v4.2 |
| **Python** | 3.8+ |
| **Dependencies** | No new dependencies |
| **Breaking Changes** | None |
| **Migration Required** | No |

---

## User Guide: Font Size Preferences

### First Time Users

1. Launch the app
2. Click font size "+" or "-" buttons in header to adjust
3. Your preference is automatically saved to `.env`
4. Close and reopen the app
5. Font size will be restored to your preference ‚úÖ

### Accessibility

**Font sizes available:**
- 8px (very small)
- 10px (default)
- 12px (small)
- 14px (medium) ‚≠ê
- 16px (large)
- 18px (larger)
- 20px (extra large)

**For users with visual impairments:**
- Set preferred font size once
- All tabs respect the setting
- Preference persists across sessions

---

## User Guide: Output Folder Naming

### How It Works

**Before v4.3:**
```
Input:  /Users/jane/data/Transcripts/
Output: /Users/jane/data/Summaries/  ‚ùå (unclear)
```

**With v4.3:**
```
Input:  /Users/jane/data/Transcripts/
Output: /Users/jane/data/Transcripts - Summarized/  ‚úÖ (clear!)
```

### Multiple Folders

**Scenario:** Processing different folders over time

```
2025-12-01:
  Input:  /data/January_Reports/
  Output: /data/January_Reports - Summarized/

2025-12-15:
  Input:  /data/February_Reports/
  Output: /data/February_Reports - Summarized/

2025-12-23:
  Input:  /data/Q4_Summary/
  Output: /data/Q4_Summary - Summarized/
```

Each output folder clearly shows which input it came from! ‚úÖ

### Custom Output Location

**If you specify a custom output folder:**
```
Input:           /data/source/
Custom Output:   /backup/summaries/
Result:          /backup/summaries/  (unchanged)
```

Custom locations are respected as-is.

---

## Testing Checklist

### Output Folder Naming
- [ ] Default output location uses original folder name
- [ ] Multiple folders each get unique, clear names
- [ ] Custom output locations work unchanged
- [ ] Log messages confirm correct naming

### Font Size Persistence
- [ ] First run defaults to 10px
- [ ] Increasing font saves to .env
- [ ] Decreasing font saves to .env
- [ ] App restart restores saved size
- [ ] Invalid .env value falls back to default
- [ ] Other .env settings are preserved
- [ ] Log shows save/load operations

### Integration
- [ ] Bulk summarizer with new naming
- [ ] Font size applies to all tabs
- [ ] No errors in logs
- [ ] Performance unchanged

---

## Known Limitations

- Font size applies globally to all tabs (can't be per-tab)
- .env file must be writable (typical for dev environments)
- Invalid font sizes in .env fall back to default (no auto-correction)

---

## Performance Impact

| Operation | Impact | Details |
|-----------|--------|----------|
| App Startup | Negligible | Single .env read |
| Font Increase | Negligible | Single .env write |
| Font Decrease | Negligible | Single .env write |
| Output Folder Creation | Negligible | String comparison |

---

## Backward Compatibility

‚úÖ **Fully backward compatible**

- Existing installations work without changes
- No data migration required
- Old "Summaries" folders not affected
- .env keys are additive only
- Font defaults to 10px if not present

---

## Future Enhancements

Potential improvements for v4.4+:

1. **Theme Persistence** - Save dark/light mode to .env
2. **Window State** - Remember size and position
3. **Tab Memory** - Remember last active tab
4. **Folder History** - Recently used paths
5. **Per-Tab Fonts** - Different sizes for different tabs

---

## Support & Questions

For issues or questions:
1. Check `logs/scanner.log` for detailed logs
2. Review PHASE_4.3_SUMMARY.md for technical details
3. Verify .env file has correct permissions
4. Ensure Python 3.8+ is installed

---

## Commits in v4.3

1. **Fix output folder naming** - `controllers/bulk_summarizer_controller.py`
2. **Implement font size persistence** - `views/main_window.py`
3. **Add v4.3 documentation** - `PHASE_4.3_SUMMARY.md`
4. **Add v4.3 changelog** - `V4.3_CHANGELOG.md`

---

**Status:** ‚úÖ Production Ready
